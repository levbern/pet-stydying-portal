{% extends "base.html"%}

{%block main_content%}
<div class="container" style="margin-top: 100px; padding-bottom: 50px;">
    <!-- –§–∏–ª—å—Ç—Ä—ã -->
    <div class="row">
        <div class="col-md-8 mb-4">
            <input type="text" id="searchInput" class="find search-input" 
                   placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –∫—É—Ä—Å–∞–º –∏ —Ç—ç–≥–∞–º...">
        </div>
        {%if admin%}
            <div class="col-md-4 mb-4 d-flex align-items-center justify-content-center">
                <a href="/add_course" class="btn btn-outblock align-items-center px-4">–°–æ–∑–¥–∞—Ç—å –∫—É—Ä—Å</a>
            </div>
        {%endif%}
    </div>
    <div class="row mb-4">
        <div class="col-md-8" style="width: 100%;">
            <div class="d-flex flex-wrap justify-content-start" id="tagFilters">
                <div class="tag-filter active" data-tag="all">–í—Å–µ –∫—É—Ä—Å—ã</div>
                <div class="tag-filter" data-tag="–º–∞—Ç–µ–º–∞—Ç–∏–∫–∞">–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</div>
                <div class="tag-filter" data-tag="–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ">–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ</div>
                <div class="tag-filter" data-tag="–ª–∏–Ω–≥–≤–∏—Å—Ç–∏–∫–∞">–õ–∏–Ω–≥–≤–∏—Å—Ç–∏–∫–∞</div>
                <div class="tag-filter" data-tag="—Ñ–∏–∑–∏–∫–∞">–§–∏–∑–∏–∫–∞</div>
                <div class="tag-filter" data-tag="–∏—Å—Ç–æ—Ä–∏—è">–ò—Å—Ç–æ—Ä–∏—è</div>
            </div>
        </div>
    </div>

    <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –∫—É—Ä—Å–æ–≤ -->
    <div class="row g-4" id="coursesContainer">
        <!-- –¢—É—Ç –º–æ–∂–Ω–æ —Ü–∏–∫–ª–æ–º –≤—ã–≤–æ–¥–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏, –æ–Ω–∏ –±—É–¥—É—Ç —Ä–∞—Å–ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ-->
        <!-- –ö—É—Ä—Å 1 -->
        <div class="col-lg-4 col-md-6" data-tags="–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–µ–±" data-name="–í–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞">
            <div class="course-card animated-card">
                <div class="course-content">
                    <h5 class="mb-3">üöÄ –û—Å–Ω–æ–≤—ã –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏</h5>
                    <p class="text-grey mb-4">–ü–æ–ª–Ω—ã–π –∫—É—Ä—Å –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Å –Ω—É–ª—è</p>
                    <div class="mt-auto">
                        <div class="mb-4">
                            <span class="course-tag">HTML/CSS</span>
                            <span class="course-tag">JavaScript</span>
                            <span class="course-tag">React</span>
                        </div>
                        <button class="btn btn-purple btn-courses w-100">–ù–∞—á–∞—Ç—å –æ–±—É—á–µ–Ω–∏–µ</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ö—É—Ä—Å 2 -->
        <div class="col-lg-4 col-md-6" data-tags="–¥–∏–∑–∞–π–Ω ui/ux" data-name="UI/UX –¥–∏–∑–∞–π–Ω">
            <div class="course-card animated-card">
                <div class="course-content">
                    <h5 class="mb-3">üé® –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π UX</h5>
                    <p class="text-grey mb-4">–ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª–æ–∂–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –∏ –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º</p>
                    <div class="mt-auto">
                        <div class="mb-4">
                            <span class="course-tag">Figma</span>
                            <span class="course-tag">–ü—Ä–æ—Ç–æ—Ç–∏–ø—ã</span>
                            <span class="course-tag">–ê–Ω–∏–º–∞—Ü–∏—è</span>
                        </div>
                        <button class="btn btn-purple btn-courses w-100">–ò–∑—É—á–∞—Ç—å –¥–∏–∑–∞–π–Ω</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ö—É—Ä—Å 3 -->
        <div class="col-lg-4 col-md-6" data-tags="–∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –¥–∞–Ω–Ω—ã–µ" data-name="–ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö">
            <div class="course-card animated-card">
                <div class="course-content">
                    <h5 class="mb-3">üìä Data Science</h5>
                    <p class="text-grey mb-4">–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –∏ –∞–Ω–∞–ª–∏–∑ –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö</p>

                    <!-- –ù–∏–∂–Ω–∏–π –±–ª–æ–∫ —Å —Ç–µ–≥–∞–º–∏ –∏ –∫–Ω–æ–ø–∫–æ–π -->
                    <div class="mt-auto">
                        <div class="mb-4">
                            <span class="course-tag">Python</span>
                            <span class="course-tag">SQL</span>
                            <span class="course-tag">Tableau</span>
                        </div>
                        <button class="btn btn-purple btn-courses w-100">–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<script>
    document.addEventListener('DOMContentLoaded', () => {
        const searchInput = document.getElementById('searchInput');
        const tagFilters = document.querySelectorAll('.tag-filter');
        const courses = document.querySelectorAll('[data-tags]');

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏
        document.querySelectorAll('.animated-card').forEach((card, index) => {
            card.style.animationDelay = `${index * 0.15}s`;
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        searchInput.addEventListener('input', filterCourses);
        tagFilters.forEach(tag => tag.addEventListener('click', toggleTagFilter));

        function filterCourses() {
            const searchTerm = searchInput.value.toLowerCase();
            const activeTags = Array.from(document.querySelectorAll('.tag-filter.active'))
                                  .map(tag => tag.dataset.tag);

            courses.forEach(course => {
                const courseTags = course.dataset.tags.split(' ');
                const courseName = course.dataset.name?.toLowerCase() || '';
                
                const matchesSearch = courseName.includes(searchTerm) || 
                                    course.textContent.toLowerCase().includes(searchTerm);
                
                const matchesTags = activeTags.includes('all') || 
                                  activeTags.every(tag => courseTags.includes(tag));

                course.style.display = (matchesSearch && matchesTags) ? 'block' : 'none';
            });
        }

        function toggleTagFilter(e) {
            const tag = e.target;
            if (tag.dataset.tag === 'all') {
                tagFilters.forEach(t => t.classList.remove('active'));
                tag.classList.add('active');
            } else {
                document.querySelector('[data-tag="all"]').classList.remove('active');
                tag.classList.toggle('active');
            }
            filterCourses();
        }
    });
</script>
{% endblock %}